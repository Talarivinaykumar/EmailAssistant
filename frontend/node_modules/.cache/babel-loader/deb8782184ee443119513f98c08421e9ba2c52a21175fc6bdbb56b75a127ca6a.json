{"ast":null,"code":"import React,{useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{ArrowLeftIcon,UserIcon,ClockIcon,CheckCircleIcon,PaperAirplaneIcon,DocumentTextIcon}from'@heroicons/react/24/outline';import{emailApi}from'../services/api';import{EmailStatus,Priority}from'../types';import AiReplyGenerator from'../components/AiReplyGenerator';import ReplyComposer from'../components/ReplyComposer';import{teamApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmailDetail=()=>{const{id}=useParams();const navigate=useNavigate();const queryClient=useQueryClient();const[showAiReply,setShowAiReply]=useState(false);const[showReplyComposer,setShowReplyComposer]=useState(false);// Validate email ID - prevent fetching with invalid IDs\nconst isValidEmailId=id&&id!=='new'&&id!=='undefined'&&id.trim()!=='';const{data:email,isLoading,error}=useQuery({queryKey:['email',id],queryFn:()=>emailApi.getEmailById(id),enabled:!!isValidEmailId});const{data:teams}=useQuery({queryKey:['teams'],queryFn:teamApi.getAllTeams});const updateStatusMutation=useMutation({mutationFn:_ref=>{let{emailId,status}=_ref;return emailApi.updateEmailStatus(emailId,status);},onSuccess:()=>{queryClient.invalidateQueries({queryKey:['email',id]});queryClient.invalidateQueries({queryKey:['emails']});}});const updatePriorityMutation=useMutation({mutationFn:_ref2=>{let{emailId,priority}=_ref2;return emailApi.updateEmailPriority(emailId,priority);},onSuccess:()=>{queryClient.invalidateQueries({queryKey:['email',id]});queryClient.invalidateQueries({queryKey:['emails']});}});// Removed unused mutations\nif(isLoading&&isValidEmailId){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}if(error||!email){// Check if it's an invalid ID error\nif(!isValidEmailId){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Invalid Email ID\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"The email ID \\\"\",id,\"\\\" is not valid. Please check the URL or navigate to a valid email.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/emails'),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Back to Emails\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"Error loading email. Please try again.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/emails'),className:\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Back to Emails\"})]});}const getStatusColor=status=>{switch(status){case EmailStatus.RECEIVED:return'bg-gray-100 text-gray-800';case EmailStatus.PROCESSING:return'bg-blue-100 text-blue-800';case EmailStatus.ASSIGNED:return'bg-yellow-100 text-yellow-800';case EmailStatus.IN_PROGRESS:return'bg-orange-100 text-orange-800';case EmailStatus.RESPONDED:return'bg-green-100 text-green-800';case EmailStatus.CLOSED:return'bg-gray-100 text-gray-800';case EmailStatus.ESCALATED:return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getPriorityColor=priority=>{switch(priority){case Priority.LOW:return'bg-green-100 text-green-800';case Priority.MEDIUM:return'bg-yellow-100 text-yellow-800';case Priority.HIGH:return'bg-orange-100 text-orange-800';case Priority.URGENT:return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const formatDate=dateString=>{return new Date(dateString).toLocaleString('en-US',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/emails'),className:\"p-2 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:email.subject}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"From: \",email.from]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-3 py-1 text-sm font-semibold rounded-full \".concat(getStatusColor(email.status)),children:email.status.replace('_',' ')}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-3 py-1 text-sm font-semibold rounded-full \".concat(getPriorityColor(email.priority)),children:email.priority})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Email Content\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"prose max-w-none\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Subject:\"}),\" \",email.subject]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"From:\"}),\" \",email.from]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"To:\"}),\" \",email.to]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Received:\"}),\" \",formatDate(email.receivedAt)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Body:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-4 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"whitespace-pre-wrap text-sm\",children:email.body})})]})]})})]}),email.aiGeneratedReply&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"AI Generated Reply\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"prose max-w-none\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"whitespace-pre-wrap text-sm bg-blue-50 p-4 rounded-lg\",children:email.aiGeneratedReply})})})]}),email.finalReply&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Final Reply\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"prose max-w-none\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"whitespace-pre-wrap text-sm bg-green-50 p-4 rounded-lg\",children:email.finalReply})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Email Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Intent\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:email.intent.replace('_',' ')}),email.intentConfidence&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[Math.round(email.intentConfidence*100),\"% confidence\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Status\"}),/*#__PURE__*/_jsx(\"select\",{value:email.status,onChange:e=>updateStatusMutation.mutate({emailId:email.id,status:e.target.value}),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",children:Object.values(EmailStatus).map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:status.replace('_',' ')},status))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Priority\"}),/*#__PURE__*/_jsx(\"select\",{value:email.priority,onChange:e=>updatePriorityMutation.mutate({emailId:email.id,priority:e.target.value}),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",children:Object.values(Priority).map(priority=>/*#__PURE__*/_jsx(\"option\",{value:priority,children:priority},priority))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Assigned Team\"}),/*#__PURE__*/_jsxs(\"select\",{value:email.assignedTeam||'',onChange:e=>{if(e.target.value){emailApi.assignEmailToTeam(email.id,e.target.value);queryClient.invalidateQueries({queryKey:['email',id]});queryClient.invalidateQueries({queryKey:['emails']});}},className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unassigned\"}),teams===null||teams===void 0?void 0:teams.map(team=>/*#__PURE__*/_jsx(\"option\",{value:team.id,children:team.name},team.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Assigned User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:email.assignedUser||'Unassigned'})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Received\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:formatDate(email.receivedAt)})]})]}),email.processedAt&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Processed\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:formatDate(email.processedAt)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Email Actions\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAiReply(true),className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-4 w-4 mr-2\"}),\"Generate AI Reply\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowReplyComposer(true),className:\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4 mr-2\"}),\"Compose Reply\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-3 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatusMutation.mutate({emailId:email.id,status:EmailStatus.ASSIGNED}),className:\"flex justify-center py-2 px-3 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50\",children:\"Assign\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateStatusMutation.mutate({emailId:email.id,status:EmailStatus.ESCALATED}),className:\"flex justify-center py-2 px-3 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50\",children:\"Escalate\"})]})]})]})]})]})]}),showAiReply&&/*#__PURE__*/_jsx(AiReplyGenerator,{emailId:email.id,onClose:()=>setShowAiReply(false)}),showReplyComposer&&/*#__PURE__*/_jsx(ReplyComposer,{emailId:email.id,originalEmail:{from:email.from,subject:email.subject,body:email.body},onClose:()=>setShowReplyComposer(false),onReplySent:()=>{queryClient.invalidateQueries({queryKey:['email',id]});queryClient.invalidateQueries({queryKey:['emails']});}})]});};export default EmailDetail;","map":{"version":3,"names":["React","useState","useParams","useNavigate","useQuery","useMutation","useQueryClient","ArrowLeftIcon","UserIcon","ClockIcon","CheckCircleIcon","PaperAirplaneIcon","DocumentTextIcon","emailApi","EmailStatus","Priority","AiReplyGenerator","ReplyComposer","teamApi","jsx","_jsx","jsxs","_jsxs","EmailDetail","id","navigate","queryClient","showAiReply","setShowAiReply","showReplyComposer","setShowReplyComposer","isValidEmailId","trim","data","email","isLoading","error","queryKey","queryFn","getEmailById","enabled","teams","getAllTeams","updateStatusMutation","mutationFn","_ref","emailId","status","updateEmailStatus","onSuccess","invalidateQueries","updatePriorityMutation","_ref2","priority","updateEmailPriority","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","getStatusColor","RECEIVED","PROCESSING","ASSIGNED","IN_PROGRESS","RESPONDED","CLOSED","ESCALATED","getPriorityColor","LOW","MEDIUM","HIGH","URGENT","formatDate","dateString","Date","toLocaleString","year","month","day","hour","minute","subject","from","concat","replace","to","receivedAt","body","aiGeneratedReply","finalReply","intent","intentConfidence","Math","round","value","onChange","e","mutate","target","Object","values","map","assignedTeam","assignEmailToTeam","team","name","assignedUser","processedAt","onClose","originalEmail","onReplySent"],"sources":["C:/vinay/projects/Email/frontend/src/pages/EmailDetail.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  ArrowLeftIcon,\r\n  UserGroupIcon,\r\n  UserIcon,\r\n  ClockIcon,\r\n  CheckCircleIcon,\r\n  PaperAirplaneIcon,\r\n  DocumentTextIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { emailApi } from '../services/api';\r\nimport { EmailStatus, Priority } from '../types';\r\nimport AiReplyGenerator from '../components/AiReplyGenerator';\r\nimport ReplyComposer from '../components/ReplyComposer';\r\nimport { teamApi } from '../services/api';\r\n\r\nconst EmailDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n  const [showAiReply, setShowAiReply] = useState(false);\r\n  const [showReplyComposer, setShowReplyComposer] = useState(false);\r\n\r\n  // Validate email ID - prevent fetching with invalid IDs\r\n  const isValidEmailId = id && id !== 'new' && id !== 'undefined' && id.trim() !== '';\r\n\r\n  const { data: email, isLoading, error } = useQuery({\r\n    queryKey: ['email', id],\r\n    queryFn: () => emailApi.getEmailById(id!),\r\n    enabled: !!isValidEmailId,\r\n  });\r\n\r\n  const { data: teams } = useQuery({\r\n    queryKey: ['teams'],\r\n    queryFn: teamApi.getAllTeams,\r\n  });\r\n\r\n  const updateStatusMutation = useMutation({\r\n    mutationFn: ({ emailId, status }: { emailId: string; status: EmailStatus }) =>\r\n      emailApi.updateEmailStatus(emailId, status),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['email', id] });\r\n      queryClient.invalidateQueries({ queryKey: ['emails'] });\r\n    },\r\n  });\r\n\r\n  const updatePriorityMutation = useMutation({\r\n    mutationFn: ({ emailId, priority }: { emailId: string; priority: Priority }) =>\r\n      emailApi.updateEmailPriority(emailId, priority),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['email', id] });\r\n      queryClient.invalidateQueries({ queryKey: ['emails'] });\r\n    },\r\n  });\r\n\r\n  // Removed unused mutations\r\n\r\n  if (isLoading && isValidEmailId) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !email) {\r\n    // Check if it's an invalid ID error\r\n    if (!isValidEmailId) {\r\n      return (\r\n        <div className=\"text-center py-8\">\r\n          <div className=\"max-w-md mx-auto\">\r\n            <div className=\"text-red-500 mb-4\">\r\n              <svg className=\"mx-auto h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Invalid Email ID</h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              The email ID \"{id}\" is not valid. Please check the URL or navigate to a valid email.\r\n            </p>\r\n            <button\r\n              onClick={() => navigate('/emails')}\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n            >\r\n              Back to Emails\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-red-500\">Error loading email. Please try again.</p>\r\n        <button\r\n          onClick={() => navigate('/emails')}\r\n          className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n        >\r\n          Back to Emails\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getStatusColor = (status: EmailStatus) => {\r\n    switch (status) {\r\n      case EmailStatus.RECEIVED:\r\n        return 'bg-gray-100 text-gray-800';\r\n      case EmailStatus.PROCESSING:\r\n        return 'bg-blue-100 text-blue-800';\r\n      case EmailStatus.ASSIGNED:\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case EmailStatus.IN_PROGRESS:\r\n        return 'bg-orange-100 text-orange-800';\r\n      case EmailStatus.RESPONDED:\r\n        return 'bg-green-100 text-green-800';\r\n      case EmailStatus.CLOSED:\r\n        return 'bg-gray-100 text-gray-800';\r\n      case EmailStatus.ESCALATED:\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority: Priority) => {\r\n    switch (priority) {\r\n      case Priority.LOW:\r\n        return 'bg-green-100 text-green-800';\r\n      case Priority.MEDIUM:\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case Priority.HIGH:\r\n        return 'bg-orange-100 text-orange-800';\r\n      case Priority.URGENT:\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <button\r\n            onClick={() => navigate('/emails')}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600\"\r\n          >\r\n            <ArrowLeftIcon className=\"h-5 w-5\" />\r\n          </button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{email.subject}</h1>\r\n            <p className=\"text-sm text-gray-500\">From: {email.from}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-3\">\r\n          <span className={`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${getStatusColor(email.status)}`}>\r\n            {email.status.replace('_', ' ')}\r\n          </span>\r\n          <span className={`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${getPriorityColor(email.priority)}`}>\r\n            {email.priority}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main content */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Email content */}\r\n          <div className=\"bg-white shadow rounded-lg\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200\">\r\n              <h3 className=\"text-lg font-medium text-gray-900\">Email Content</h3>\r\n            </div>\r\n            <div className=\"px-6 py-4\">\r\n              <div className=\"prose max-w-none\">\r\n                <div className=\"mb-4\">\r\n                  <strong>Subject:</strong> {email.subject}\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <strong>From:</strong> {email.from}\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <strong>To:</strong> {email.to}\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <strong>Received:</strong> {formatDate(email.receivedAt)}\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                  <strong>Body:</strong>\r\n                  <div className=\"mt-2 p-4 bg-gray-50 rounded-lg\">\r\n                    <pre className=\"whitespace-pre-wrap text-sm\">{email.body}</pre>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* AI Generated Reply */}\r\n          {email.aiGeneratedReply && (\r\n            <div className=\"bg-white shadow rounded-lg\">\r\n              <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">AI Generated Reply</h3>\r\n              </div>\r\n              <div className=\"px-6 py-4\">\r\n                <div className=\"prose max-w-none\">\r\n                  <pre className=\"whitespace-pre-wrap text-sm bg-blue-50 p-4 rounded-lg\">{email.aiGeneratedReply}</pre>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Final Reply */}\r\n          {email.finalReply && (\r\n            <div className=\"bg-white shadow rounded-lg\">\r\n              <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Final Reply</h3>\r\n              </div>\r\n              <div className=\"px-6 py-4\">\r\n                <div className=\"prose max-w-none\">\r\n                  <pre className=\"whitespace-pre-wrap text-sm bg-green-50 p-4 rounded-lg\">{email.finalReply}</pre>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Sidebar */}\r\n        <div className=\"space-y-6\">\r\n          {/* Email metadata */}\r\n          <div className=\"bg-white shadow rounded-lg\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200\">\r\n              <h3 className=\"text-lg font-medium text-gray-900\">Email Details</h3>\r\n            </div>\r\n            <div className=\"px-6 py-4 space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700\">Intent</label>\r\n                <p className=\"mt-1 text-sm text-gray-900\">{email.intent.replace('_', ' ')}</p>\r\n                {email.intentConfidence && (\r\n                  <p className=\"text-xs text-gray-500\">{Math.round(email.intentConfidence * 100)}% confidence</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700\">Status</label>\r\n                <select\r\n                  value={email.status}\r\n                  onChange={(e) => updateStatusMutation.mutate({ emailId: email.id, status: e.target.value as EmailStatus })}\r\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                >\r\n                  {Object.values(EmailStatus).map((status) => (\r\n                    <option key={status} value={status}>\r\n                      {status.replace('_', ' ')}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700\">Priority</label>\r\n                <select\r\n                  value={email.priority}\r\n                  onChange={(e) => updatePriorityMutation.mutate({ emailId: email.id, priority: e.target.value as Priority })}\r\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                >\r\n                  {Object.values(Priority).map((priority) => (\r\n                    <option key={priority} value={priority}>\r\n                      {priority}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n                             <div>\r\n                 <label className=\"block text-sm font-medium text-gray-700\">Assigned Team</label>\r\n                 <select\r\n                   value={email.assignedTeam || ''}\r\n                   onChange={(e) => {\r\n                     if (e.target.value) {\r\n                       emailApi.assignEmailToTeam(email.id, e.target.value);\r\n                       queryClient.invalidateQueries({ queryKey: ['email', id] });\r\n                       queryClient.invalidateQueries({ queryKey: ['emails'] });\r\n                     }\r\n                   }}\r\n                   className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                 >\r\n                   <option value=\"\">Unassigned</option>\r\n                   {teams?.map((team) => (\r\n                     <option key={team.id} value={team.id}>\r\n                       {team.name}\r\n                     </option>\r\n                   ))}\r\n                 </select>\r\n               </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700\">Assigned User</label>\r\n                <div className=\"mt-1 flex items-center\">\r\n                  <UserIcon className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                  <span className=\"text-sm text-gray-900\">{email.assignedUser || 'Unassigned'}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700\">Received</label>\r\n                <div className=\"mt-1 flex items-center\">\r\n                  <ClockIcon className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                  <span className=\"text-sm text-gray-900\">{formatDate(email.receivedAt)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {email.processedAt && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">Processed</label>\r\n                  <div className=\"mt-1 flex items-center\">\r\n                    <CheckCircleIcon className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                    <span className=\"text-sm text-gray-900\">{formatDate(email.processedAt)}</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"bg-white shadow rounded-lg\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200\">\r\n              <h3 className=\"text-lg font-medium text-gray-900\">Email Actions</h3>\r\n            </div>\r\n            <div className=\"px-6 py-4 space-y-3\">\r\n              {/* AI Reply Generation */}\r\n              <button\r\n                onClick={() => setShowAiReply(true)}\r\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n              >\r\n                <DocumentTextIcon className=\"h-4 w-4 mr-2\" />\r\n                Generate AI Reply\r\n              </button>\r\n              \r\n              {/* Manual Reply Composition */}\r\n              <button\r\n                onClick={() => setShowReplyComposer(true)}\r\n                className=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n              >\r\n                <PaperAirplaneIcon className=\"h-4 w-4 mr-2\" />\r\n                Compose Reply\r\n              </button>\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"pt-3 border-t border-gray-200\">\r\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Quick Actions</h4>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <button\r\n                    onClick={() => updateStatusMutation.mutate({ emailId: email.id, status: EmailStatus.ASSIGNED })}\r\n                    className=\"flex justify-center py-2 px-3 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50\"\r\n                  >\r\n                    Assign\r\n                  </button>\r\n                  <button\r\n                    onClick={() => updateStatusMutation.mutate({ emailId: email.id, status: EmailStatus.ESCALATED })}\r\n                    className=\"flex justify-center py-2 px-3 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50\"\r\n                  >\r\n                    Escalate\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Reply Generator Modal */}\r\n      {showAiReply && (\r\n        <AiReplyGenerator\r\n          emailId={email.id}\r\n          onClose={() => setShowAiReply(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Reply Composer Modal */}\r\n      {showReplyComposer && (\r\n        <ReplyComposer\r\n          emailId={email.id}\r\n          originalEmail={{\r\n            from: email.from,\r\n            subject: email.subject,\r\n            body: email.body\r\n          }}\r\n          onClose={() => setShowReplyComposer(false)}\r\n          onReplySent={() => {\r\n            queryClient.invalidateQueries({ queryKey: ['email', id] });\r\n            queryClient.invalidateQueries({ queryKey: ['emails'] });\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}