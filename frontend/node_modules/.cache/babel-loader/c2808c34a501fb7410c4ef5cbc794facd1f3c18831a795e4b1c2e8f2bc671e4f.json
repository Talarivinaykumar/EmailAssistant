{"ast":null,"code":"import _objectSpread from\"C:/vinay/projects/Email/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useMutation,useQueryClient}from'@tanstack/react-query';import{XMarkIcon,SparklesIcon,PaperAirplaneIcon,DocumentTextIcon,ClockIcon}from'@heroicons/react/24/outline';import{emailApi}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AiReplyGenerator=_ref=>{let{emailId,onClose,onReplySent}=_ref;const queryClient=useQueryClient();const[request,setRequest]=useState({emailId,tone:'professional',style:'detailed',includeToneFeedback:true,includeClarityFeedback:true});const[subject,setSubject]=useState(\"Re: Your Email\");const[replyContent,setReplyContent]=useState('');const[isSending,setIsSending]=useState(false);// Load draft from localStorage\nuseEffect(()=>{const savedDraft=localStorage.getItem(\"draft-\".concat(emailId));if(savedDraft){const{subject,replyContent}=JSON.parse(savedDraft);setSubject(subject||\"Re: Your Email\");setReplyContent(replyContent||'');}},[emailId]);// Save draft\nuseEffect(()=>{localStorage.setItem(\"draft-\".concat(emailId),JSON.stringify({subject,replyContent}));},[emailId,subject,replyContent]);const generateReplyMutation=useMutation({mutationFn:request=>emailApi.generateAiReply(request),onSuccess:data=>{setReplyContent(data.generatedReply||'');}});const sendReplyMutation=useMutation({mutationFn:data=>emailApi.sendReply(data.emailId,data.reply,'current-user'),onSuccess:()=>{setIsSending(false);localStorage.removeItem(\"draft-\".concat(emailId));// ✅ clear draft after sending\n// ✅ Refresh parent data immediately\nqueryClient.invalidateQueries({queryKey:['emails']});queryClient.invalidateQueries({queryKey:['email',emailId]});onReplySent===null||onReplySent===void 0?void 0:onReplySent();onClose();},onError:error=>{setIsSending(false);console.error('Error sending reply:',error);alert('Failed to send reply. Please try again.');}});const handleGenerate=()=>{if(request.emailId){generateReplyMutation.mutate(request);}};const handleSendReply=()=>{if(!replyContent.trim()){alert('Please enter a reply message.');return;}setIsSending(true);sendReplyMutation.mutate({emailId,reply:replyContent});};const emailTemplates=[{name:'Thank You',content:'Thank you for contacting us. We appreciate your patience and will get back to you shortly.'},{name:'Under Review',content:'We have received your request and it is currently under review. We will provide you with an update as soon as possible.'},{name:'Escalation',content:'I understand your concern and I am escalating this matter to our senior support team. You will receive a response within 24 hours.'},{name:'Resolution',content:'I am pleased to inform you that we have resolved your issue. Please let us know if you need any further assistance.'}];const applyTemplate=template=>{setReplyContent(template);};const getSeverityColor=severity=>{switch(severity){case'high':return'text-red-600 bg-red-50 border-red-200';case'medium':return'text-yellow-600 bg-yellow-50 border-yellow-200';case'low':return'text-green-600 bg-green-50 border-green-200';default:return'text-gray-600 bg-gray-50 border-gray-200';}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\",onClick:onClose}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-6 w-6 text-primary-600 mr-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Generate AI Reply\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Tone\"}),/*#__PURE__*/_jsxs(\"select\",{value:request.tone,onChange:e=>setRequest(_objectSpread(_objectSpread({},request),{},{tone:e.target.value})),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"professional\",children:\"Professional\"}),/*#__PURE__*/_jsx(\"option\",{value:\"friendly\",children:\"Friendly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"formal\",children:\"Formal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"casual\",children:\"Casual\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Style\"}),/*#__PURE__*/_jsxs(\"select\",{value:request.style,onChange:e=>setRequest(_objectSpread(_objectSpread({},request),{},{style:e.target.value})),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"concise\",children:\"Concise\"}),/*#__PURE__*/_jsx(\"option\",{value:\"detailed\",children:\"Detailed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"empathetic\",children:\"Empathetic\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Additional Context\"}),/*#__PURE__*/_jsx(\"textarea\",{value:request.additionalContext||'',onChange:e=>setRequest(_objectSpread(_objectSpread({},request),{},{additionalContext:e.target.value})),rows:3,className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]})]})]}),generateReplyMutation.data&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-4 py-4 sm:px-6 space-y-4\",children:[(generateReplyMutation.data.toneFeedback.length>0||generateReplyMutation.data.clarityFeedback.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[generateReplyMutation.data.toneFeedback.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Tone Feedback\"}),generateReplyMutation.data.toneFeedback.map((fb,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg border \".concat(getSeverityColor(fb.severity)),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:fb.category}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:fb.suggestion}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 opacity-75\",children:fb.reason})]},idx))]}),generateReplyMutation.data.clarityFeedback.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Clarity Feedback\"}),generateReplyMutation.data.clarityFeedback.map((fb,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg border \".concat(getSeverityColor(fb.severity)),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:fb.category}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:fb.suggestion}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 opacity-75\",children:fb.reason})]},idx))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:subject,onChange:e=>setSubject(e.target.value),className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Quick Templates\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2\",children:emailTemplates.map((template,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>applyTemplate(template.content),className:\"flex items-center p-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-4 w-4 text-gray-400 mr-2\"}),template.name]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Reply Message\"}),/*#__PURE__*/_jsx(\"textarea\",{value:replyContent,onChange:e=>setReplyContent(e.target.value),rows:8,className:\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right text-sm text-gray-500\",children:[replyContent.length,\" characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",children:[generateReplyMutation.data?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSendReply,disabled:isSending||!replyContent.trim(),className:\"w-full inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50\",children:isSending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-2 animate-spin\"}),\" Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4 mr-2\"}),\" Send Reply\"]})}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleGenerate,disabled:generateReplyMutation.isPending,className:\"w-full inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50\",children:generateReplyMutation.isPending?'Generating...':'Generate Reply'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\",children:\"Close\"})]})]})]})});};export default AiReplyGenerator;","map":{"version":3,"names":["React","useState","useEffect","useMutation","useQueryClient","XMarkIcon","SparklesIcon","PaperAirplaneIcon","DocumentTextIcon","ClockIcon","emailApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AiReplyGenerator","_ref","emailId","onClose","onReplySent","queryClient","request","setRequest","tone","style","includeToneFeedback","includeClarityFeedback","subject","setSubject","replyContent","setReplyContent","isSending","setIsSending","savedDraft","localStorage","getItem","concat","JSON","parse","setItem","stringify","generateReplyMutation","mutationFn","generateAiReply","onSuccess","data","generatedReply","sendReplyMutation","sendReply","reply","removeItem","invalidateQueries","queryKey","onError","error","console","alert","handleGenerate","mutate","handleSendReply","trim","emailTemplates","name","content","applyTemplate","template","getSeverityColor","severity","className","children","onClick","value","onChange","e","_objectSpread","target","additionalContext","rows","toneFeedback","length","clarityFeedback","map","fb","idx","category","suggestion","reason","type","index","disabled","isPending"],"sources":["C:/vinay/projects/Email/frontend/src/components/AiReplyGenerator.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { XMarkIcon, SparklesIcon, PaperAirplaneIcon, DocumentTextIcon, ClockIcon } from '@heroicons/react/24/outline';\r\nimport { emailApi } from '../services/api';\r\nimport { AiReplyRequest, FeedbackItem } from '../types';\r\n\r\ninterface AiReplyGeneratorProps {\r\n  emailId: string;\r\n  onClose: () => void;\r\n  onReplySent?: () => void; // parent callback\r\n}\r\n\r\nconst AiReplyGenerator: React.FC<AiReplyGeneratorProps> = ({ emailId, onClose, onReplySent }) => {\r\n  const queryClient = useQueryClient();\r\n\r\n  const [request, setRequest] = useState<Partial<AiReplyRequest>>({\r\n    emailId,\r\n    tone: 'professional',\r\n    style: 'detailed',\r\n    includeToneFeedback: true,\r\n    includeClarityFeedback: true,\r\n  });\r\n\r\n  const [subject, setSubject] = useState(`Re: Your Email`);\r\n  const [replyContent, setReplyContent] = useState('');\r\n  const [isSending, setIsSending] = useState(false);\r\n\r\n  // Load draft from localStorage\r\n  useEffect(() => {\r\n    const savedDraft = localStorage.getItem(`draft-${emailId}`);\r\n    if (savedDraft) {\r\n      const { subject, replyContent } = JSON.parse(savedDraft);\r\n      setSubject(subject || `Re: Your Email`);\r\n      setReplyContent(replyContent || '');\r\n    }\r\n  }, [emailId]);\r\n\r\n  // Save draft\r\n  useEffect(() => {\r\n    localStorage.setItem(`draft-${emailId}`, JSON.stringify({ subject, replyContent }));\r\n  }, [emailId, subject, replyContent]);\r\n\r\n  const generateReplyMutation = useMutation({\r\n    mutationFn: (request: AiReplyRequest) => emailApi.generateAiReply(request),\r\n    onSuccess: (data) => {\r\n      setReplyContent(data.generatedReply || '');\r\n    },\r\n  });\r\n\r\n  const sendReplyMutation = useMutation({\r\n    mutationFn: (data: { emailId: string; reply: string }) =>\r\n      emailApi.sendReply(data.emailId, data.reply, 'current-user'),\r\n    onSuccess: () => {\r\n      setIsSending(false);\r\n      localStorage.removeItem(`draft-${emailId}`); // ✅ clear draft after sending\r\n\r\n      // ✅ Refresh parent data immediately\r\n      queryClient.invalidateQueries({ queryKey: ['emails'] });\r\n      queryClient.invalidateQueries({ queryKey: ['email', emailId] });\r\n\r\n      onReplySent?.();\r\n      onClose();\r\n    },\r\n    onError: (error) => {\r\n      setIsSending(false);\r\n      console.error('Error sending reply:', error);\r\n      alert('Failed to send reply. Please try again.');\r\n    }\r\n  });\r\n\r\n  const handleGenerate = () => {\r\n    if (request.emailId) {\r\n      generateReplyMutation.mutate(request as AiReplyRequest);\r\n    }\r\n  };\r\n\r\n  const handleSendReply = () => {\r\n    if (!replyContent.trim()) {\r\n      alert('Please enter a reply message.');\r\n      return;\r\n    }\r\n    setIsSending(true);\r\n    sendReplyMutation.mutate({\r\n      emailId,\r\n      reply: replyContent\r\n    });\r\n  };\r\n\r\n  const emailTemplates = [\r\n    { name: 'Thank You', content: 'Thank you for contacting us. We appreciate your patience and will get back to you shortly.' },\r\n    { name: 'Under Review', content: 'We have received your request and it is currently under review. We will provide you with an update as soon as possible.' },\r\n    { name: 'Escalation', content: 'I understand your concern and I am escalating this matter to our senior support team. You will receive a response within 24 hours.' },\r\n    { name: 'Resolution', content: 'I am pleased to inform you that we have resolved your issue. Please let us know if you need any further assistance.' }\r\n  ];\r\n\r\n  const applyTemplate = (template: string) => {\r\n    setReplyContent(template);\r\n  };\r\n\r\n  const getSeverityColor = (severity: string) => {\r\n    switch (severity) {\r\n      case 'high': return 'text-red-600 bg-red-50 border-red-200';\r\n      case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\r\n      case 'low': return 'text-green-600 bg-green-50 border-green-200';\r\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose} />\r\n\r\n        <div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full\">\r\n          <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"flex items-center\">\r\n                <SparklesIcon className=\"h-6 w-6 text-primary-600 mr-2\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Generate AI Reply</h3>\r\n              </div>\r\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* AI Config */}\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Tone</label>\r\n                <select\r\n                  value={request.tone}\r\n                  onChange={(e) => setRequest({ ...request, tone: e.target.value })}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"professional\">Professional</option>\r\n                  <option value=\"friendly\">Friendly</option>\r\n                  <option value=\"formal\">Formal</option>\r\n                  <option value=\"casual\">Casual</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Style</label>\r\n                <select\r\n                  value={request.style}\r\n                  onChange={(e) => setRequest({ ...request, style: e.target.value })}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"concise\">Concise</option>\r\n                  <option value=\"detailed\">Detailed</option>\r\n                  <option value=\"empathetic\">Empathetic</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Additional Context</label>\r\n                <textarea\r\n                  value={request.additionalContext || ''}\r\n                  onChange={(e) => setRequest({ ...request, additionalContext: e.target.value })}\r\n                  rows={3}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Generated Reply Section */}\r\n          {generateReplyMutation.data && (\r\n            <div className=\"bg-gray-50 px-4 py-4 sm:px-6 space-y-4\">\r\n              {/* Feedback */}\r\n              {(generateReplyMutation.data.toneFeedback.length > 0 || generateReplyMutation.data.clarityFeedback.length > 0) && (\r\n                <div className=\"space-y-4\">\r\n                  {generateReplyMutation.data.toneFeedback.length > 0 && (\r\n                    <div>\r\n                      <h5 className=\"text-sm font-medium text-gray-900 mb-2\">Tone Feedback</h5>\r\n                      {generateReplyMutation.data.toneFeedback.map((fb: FeedbackItem, idx: number) => (\r\n                        <div key={idx} className={`p-3 rounded-lg border ${getSeverityColor(fb.severity)}`}>\r\n                          <p className=\"text-sm font-medium\">{fb.category}</p>\r\n                          <p className=\"text-sm mt-1\">{fb.suggestion}</p>\r\n                          <p className=\"text-xs mt-1 opacity-75\">{fb.reason}</p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {generateReplyMutation.data.clarityFeedback.length > 0 && (\r\n                    <div>\r\n                      <h5 className=\"text-sm font-medium text-gray-900 mb-2\">Clarity Feedback</h5>\r\n                      {generateReplyMutation.data.clarityFeedback.map((fb: FeedbackItem, idx: number) => (\r\n                        <div key={idx} className={`p-3 rounded-lg border ${getSeverityColor(fb.severity)}`}>\r\n                          <p className=\"text-sm font-medium\">{fb.category}</p>\r\n                          <p className=\"text-sm mt-1\">{fb.suggestion}</p>\r\n                          <p className=\"text-xs mt-1 opacity-75\">{fb.reason}</p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Subject */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Subject</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={subject}\r\n                  onChange={(e) => setSubject(e.target.value)}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Templates */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Quick Templates</label>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  {emailTemplates.map((template, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => applyTemplate(template.content)}\r\n                      className=\"flex items-center p-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50\"\r\n                    >\r\n                      <DocumentTextIcon className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                      {template.name}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Reply Content */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Reply Message</label>\r\n                <textarea\r\n                  value={replyContent}\r\n                  onChange={(e) => setReplyContent(e.target.value)}\r\n                  rows={8}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"text-right text-sm text-gray-500\">{replyContent.length} characters</div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n            {generateReplyMutation.data ? (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleSendReply}\r\n                disabled={isSending || !replyContent.trim()}\r\n                className=\"w-full inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50\"\r\n              >\r\n                {isSending ? (\r\n                  <>\r\n                    <ClockIcon className=\"h-4 w-4 mr-2 animate-spin\" /> Sending...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <PaperAirplaneIcon className=\"h-4 w-4 mr-2\" /> Send Reply\r\n                  </>\r\n                )}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleGenerate}\r\n                disabled={generateReplyMutation.isPending}\r\n                className=\"w-full inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50\"\r\n              >\r\n                {generateReplyMutation.isPending ? 'Generating...' : 'Generate Reply'}\r\n              </button>\r\n            )}\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AiReplyGenerator;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}